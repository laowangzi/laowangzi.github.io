---
published: true
title: 使用Weka进行数据挖掘初体验
category: Data Mining
tags: 
  - 数据挖掘
  - Weka
layout: post
---


本科阶段比较完整系统地学习过机器学习的相关算法，但并未接触过工程平台。现在开始接触数据挖掘的工程平台weka。

使用weka尝试了阿里天池学习赛的一个二手车价格预测的项目，趁着记忆新鲜，记录一下经验以供以后参考。
#题目
赛题以预测二手车的交易价格为任务，数据集报名后可见并可下载，该数据来自某交易平台的二手车交易记录，总数据量超过40w，包含31列变量信息，其中15列为匿名变量。为了保证比赛的公平性，将会从中抽取15万条作为训练集，5万条作为测试集A，5万条作为测试集B，同时会对name、model、brand和regionCode等信息进行脱敏。
#心得
1、数据格式问题

weka支持性最好的格式是arff，本赛题提供的数据格式是csv，并且是用空格分隔的。weka的CSVLoader并不支持空格分隔的csv文件，因此需要先进行数据清洗空格替换。清洗完成后又因数据格式问题造成算法选择受限。

教训是weka提供了方便的可视化界面，最好先用weka explore打开数据集，另存为arff格式后再进行处理。因为arff格式头部规定了各个字段的数据格式，方便修改与确定，并能避免很多不必要的麻烦。

2、要进行预测的属性需要用‘？’作为占位符，不然将无法读入。

3、遵循数据挖掘流程，用filter完成数据清洗工作。

感觉weka对空值的处理能力比较弱。本数据集中有一列的空值是用“-”和空两种符号表示的，被认定为String类型，filter只能ReplaceMissingValueWith（），对于“-”，处理起来就很麻烦。

4、项目报错Exception in thread "main" java.lang.NoClassDefFoundError: no/uib/cipr/matrix/Matrix
解决：缺少Matrix Toolkits for Java矩阵运算jar包，从GitHub下载加入依赖即可。
同时发现weka的jar包中包含mtj但是无法找到，还在排查原因。

5、另一缺陷是原生weka无法构建深度的神经网络，可能需要另外下载配置。
#数据挖掘心得
1、这是一个预测问题，使用了线性回归模型和BP对二手车价格进行了预测。结果是BP模型效果明显好于线性回归。

经过本次练习，我认为想要达到更高的准确率，有以下几个方面特别重要：

（1）对业务的理解。这其中包含了特征值的取舍，空值用哪种方法处理等非常重要的问题。

（2）模型的选择。这也牵扯到对业务的理解。因此可能数据挖掘更需要的是复合型人才或者说是拥有快速学习能力和判断力的人。
